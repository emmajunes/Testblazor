@page "/deletetask"
@using BlazorToDoList.Data;
@using BlazorToDoList.Services;
@using ToDoList.API;
@inject ITaskService TaskService;
@inject NavigationManager NavigationManager;

<h3>Delete Task</h3>

Do you want to delete this list?
<EditForm Model="@taskItem" OnSubmit="@OnSubmit">
    <button type="submit">Delete</button>
</EditForm>
<a href="" @onclick="@(()=> NavigationManager.NavigateTo("/singletask"))" @onclick:preventDefault class="btn btn-primary">No</a>
@code {
    private TaskItem taskItem = new();

    public async Task OnSubmit()
    {
        try
        {
            taskItem = await TaskService.DeleteTaskAsync();
            NavigationManager.NavigateTo("/singlelist", true);
        }
        catch (Exception)
        {
            
            throw;
        }
        

    }
}
